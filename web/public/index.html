<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendari Laboral Catalunya 2023</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.6/dist/css/autoComplete.02.min.css">
  <style>
    main {
    }

    .next {
      color: white;
      background-color: green;
    }

    .past {
      color: grey;
      text-decoration: line-through;

    }

  </style>
</head>
<body>

    <script src="//unpkg.com/alpinejs" defer></script>
  <main class="container col-lg-4 mx-auto px-4">

    <h1 class="pt-5">
      Calendari laboral a Catalunya 2023
    </h1>

  <div class="px-4 py-4 mt-5 text-center mx-auto next">
    <p class="lead">La propera festa laboral a Catalunya és el</p>
    <h1 class="display-5 fw-bold" x-data><span x-text="$store.holidays.next">24 d'Abril</span> (dimarts)</h1>

    <p>Falten 43 dies</p>
  </div>

<div class="container mt-3 mb-5 text-center">
  <div class="row">
    <div class="col-sm lead">
      Escull el teu municipi per incloure les festes locals:
    </div>
    <div class="col-sm mt-3">
            <input id="search" autocomplete="off">
    </div>
  </div>
</div>

  <table class="table">
  <thead>
    <tr>
      <th scope="col">Data</th>
      <th scope="col">Dia de la setmana</th>
      <th scope="col">Festa</th>
      <th scope="col">Àmbit</th>
    </tr>
  </thead>
  <tbody>
    <tr class="past">
      <th scope="row">6 de Gener</th>
      <td>Divendres</td>
      <td>Reis</td>
      <td>Catalunya</td>
    </tr>
    <tr>
      <th scope="row">7 d'Abril</th>
      <td>Dilluns</td>
      <td>Pasqua Florida</td>
      <td>Espanya</td>

    </tr>
  </tbody>
</table>


  <div class=" text-center ">

  </div>

  <div class="px-4 py-5 my-5 text-center ">
    <div class="col-lg-6 mx-auto">
      <p class="lead mb-4">Descarrega les festes laborals per afegir-les al teu calendari (Google Calendar, Iphone, Outlook, etc).</p>
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <button type="button" class="btn btn-primary btn-lg px-4 gap-3">Descarrega calendari (iCal)</button>
      </div>
    </div>
  </div>



  </main>

    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.6/dist/autoComplete.min.js"></script>
    <script src="cat_extents.js"></script>
<script>

    let festes = [
{"date":"2023-01-06","name": "Reis", "ambit": "Catalunya"},
{"date":"2023-04-07","name": "Divendres Sant", "ambit": "Espanya"},
{"date":"2023-04-10","name": "Pasqua Florida", "ambit": "Catalunya"},
{"date":"2023-05-01","name": "Festa del Treball", "ambit": "Espanya"},
{"date":"2023-06-24","name": "Sant Joan", "ambit": "Catalunya"},
{"date":"2023-08-15","name": "L'Assumpció", "ambit": "Espanya"},
{"date":"2023-09-11","name": "Diada Nacional de Catalunya", "ambit": "Catalunya"},
{"date":"2023-10-12","name": "Festa Nacional d'Espanya", "ambit": "Espanya"},
{"date":"2023-11-01","name": "Tots Sants", "ambit": "Espanya"},
{"date":"2023-12-06","name": "Dia de la Constitució", "ambit": "Espanya"},
{"date":"2023-12-08","name": "La Immaculada", "ambit": "Espanya"},
{"date":"2023-12-25","name": "Nadal", "ambit": "Espanya"},
{"date":"2023-12-26","name": "Sant Esteve", "ambit": "Catalunya"}
]

let nextHoliday = festes[1]["date"];

document.addEventListener('alpine:init', () => {
  Alpine.store('holidays', {
		next: nextHoliday,
  })
})


/*
const date = new Date(Date.UTC(2012, 11, 20, 3, 0, 0, 200));

// request a weekday along with a long date
let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
console.log(new Intl.DateTimeFormat('de-DE', options).format(date));
*/


    let config = {
        selector: "#search",
        placeHolder: "Search ...",
        data: {

        src: window.ExtentsCat,
            keys: ["name"]
        },
        resultItem: {
            highlight: {
                render: true
            }
        }
    }
    let search = new autoComplete(config)

    search.input.addEventListener("selection", function(event) {
        let feedback = event.detail;
        search.input.blur();
        let name = feedback.selection.value.name;

        console.log(feedback);

        search.input.value = name;

    });

</script>

</body>
</html>
